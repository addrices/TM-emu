# Turing machine emulator
图灵机模拟器实现

## Overview
实现了图灵机的简单模拟器，在项目目录下输入make可以在build目录下得到命令turing。
```bash
turing -h
usage: turing [-v|--verbose] [-h|--help] <tm> <input>
[-h|--help] print help infomation
[-v|--verbose] print turing machine runtime message
```

turing命令会解析.tm文件，并以input的字符串为输入运行。结束时输出第一个纸带上面的符号串。

## verbose模式

1. 判断输入串的合法性 (也即判断所有字符是否均属于**输入符号集**，输入符号集的定义参见语法描述。

   **错误处理**：若输入串不合法，在 stderr 中按以下格式报告输入错误 (只需要报告第一个非法字符即可)，并返回错误 exit code。

2. 模拟运行合法输入串。对于图灵机上的每一次转移，在 stdout 中按以下格式给出图灵机的一个瞬时描述：

   ```
    Step   : 0
    Index0 : 0 1 2 3 4 5 6
    Tape0  : 1 0 0 1 0 0 1
    Head0  : ^
    Index1 : 0
    Tape1  : _
    Head1  : ^
    State  : 0
    ---------------------------------------------
    Step   : 1
    Index0 : 0 1 2 3 4 5 6
    Tape0  : 1 0 0 1 0 0 1
    Head0  : ^
    Index1 : 0
    Tape1  : _
    Head1  : ^
    State  : cp
    ---------------------------------------------
    ......
    ......
    ......
    ---------------------------------------------
    Step   : 29
    Index0 : 7 8 9 10
    Tape0  : t r u e
    Head0  :       ^
    Index1 : 1
    Tape1  : _
    Head1  : ^
    State  : halt_accept
    ---------------------------------------------
   ```

   

## 语法描述

图灵机的形式化描述：$$M =(Q,\Sigma,\Gamma,\delta,q0,B,F)$$

下面定义的图灵机程序语法完整地刻画了上述七部分内容。

1. **状态集 Q**：以 `#Q` 开头。**占据 (且仅占据) 图灵机程序的一行** (即不包括回车换行)；`'#'` 为该行的第一个字符 (以下2-7同)；各状态之间以英文逗号 `','` 分隔。状态用一个或多个**非空白字符** (字母`a-z,A-Z`、数字`0-9`和下划线`_`) 表示，称为该状态的**标签**，如 `"10"`、`"a"`、`"state1"` 等。语法格式为 `#Q = {q1,q2,...,qi}`。**`'='` 两边各有一个空格`' '`** (以下2-7同)。

   示例

   ```
    #Q = {0,cp,cmp,mh,accept,accept2,accept3,accept4,halt_accept,reject,reject2,reject3,reject4,reject5,halt_reject}
   
   ```

2. **输入符号集 S**：以 `#S` 开头。各符号之间以英文逗号 `','` 分隔。输入符号的可取值范围为除 `' ' (space)`、`','`、`';'`、`'{'`、`'}'`、`'*'`、`'_'` 外的所有 **ASCII 可显示字符** (定义参见 ***[维基百科](https://zh.wikipedia.org/wiki/ASCII)\*** )。语法格式为 `#S = {s1,s2,...,sj}`。

   示例：

   ```
    #S = {0,1}
   ```

3. **纸带符号集 G**：以 `#G` 开头。各符号之间以英文逗号 `','` 分隔。纸带符号的可取值范围为除 `' ' (space)`、`','`、`';'`、`'{'`、`'}'`、`'*'` 外的所有 **ASCII 可显示字符**，规定用 `'_'` 表示空格符号。语法格式为 `#G = {s1,s2,...,sk}`。

   示例：

   ```
    #G = {0,1,_,t,r,u,e,f,a,l,s}
   ```

4. **初始状态 q0**：以 `#q0` 开头。语法格式为 `#q0 = q`。

   示例：

   ```
    #q0 = 0
   ```

5. **空格符号 B**：以 `#B` 开头。语法格式为 `#B = b`。在本实验中，**空格符号规定为 `'_'`**。

   示例：

   ```
    #B = _
   ```

6. **终结状态集 F**：以 `#F` 开头。各状态之间以英文逗号 `','` 分隔。语法格式为 `#F = {f1,f2,...,fn}`。

   示例：

   ```
    #N = 2
   
   ```

7. **纸带数 N**：以 `#N` 开头。语法格式为 `#N = n`。

   示例：

   ```
    #N = 2
   ```

8. **转移函数 delta**：每个转移函数占用 (且仅占用) 图灵机程序的一行，行内容为一个五元组。五元组格式为：”<旧状态> <旧符号组> <新符号组> <方向组> <新状态>"，元组各部分之间以一个空格分隔。

   - **(新、旧) 状态** 定义见 **状态集**。
   - **(新、旧) 符号组** 均由 `n` 个**纸带符号**组成的字符串表示。
   - **方向组** 由 `n` 个以下三个符号之一组成的字符串表示：`'l'`、`'r'` 或者 `'*'`，分别表示向左移动、向右移动和不移动。

   示例：

   ```
    cmp 01 __ rl reject ; 当前处于状态 cmp
                        ; 两个带头下符号分别为 '0' 和 '1'
                        ; 将要写入的新符号为 '_' 和 '_'
                        ; 下一步第一个带头向右移动，第二个带头向左移动
                        ; 下一个状态为 reject
   ```

9. **注释和空行**：你只需要处理行注释，行注释以英文分号 `';'` 开头。在解析程序时应当忽略注释和空行。

   示例：

   ```
    ; State cmp: compare two strings
    0 __ __ ** accept ; empty input
   ```

   